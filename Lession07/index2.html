<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .error {
            display: none;
            color: red;
        }
    </style>
</head>
<body>
    <form action="" enctype="multipart/form-data" method="post">
        <div class="form-control">
            <label for="username">Username:</label>
            <input type="text" name="username" id="username" onblur="usernameBlank()" >
            <p class="error" id="error-user">
                Username không được để trống
            </p>
            <p class="error" id="error-email-user">
                Username không đúng định dạng
            </p>
        </div>
        <div class="form-control">
            <label for="password">Password:</label>
            <input type="password" name="password" id="password" onblur="PasswordBlank()">
            <p class="error" id="error-pass">
                Password không được để trống
            </p>
            <p class="error">
                Password phải chứa ít nhất 6 ký tự
            </p>
            
        </div>
        <div class="form-control" onclick="showPass()">
            <input type="checkbox" name="showPass" id="showPass">
            <label for="showPass">Hiển thị password</label>
        </div>
        <div class="form-control">
            <input type="submit" name="submit" id="sumbit">
        </div>
    </form>

    <script>
        var regxEmail = /^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/;
        var regxPass = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/;
        function usernameBlank(){
            var checkblank = document.getElementById('username').value;
            if(checkblank == ''){
                document.getElementById('error-user').style.display = 'block';
            }else{
                document.getElementById('error-user').style.display = 'none';
                    //if(regxEmail.test(checkblank)){
                    //document.getElementById('error-email-user').style.display = 'none';
                    //}else{
                    //document.getElementById('error-email-user').style.display = 'block';
                    //} 
                    //checkRegx(regxEmail,checkblank); 
                     checkRegx2("username",checkblank, regxEmail);
        }
    }
        function PasswordBlank(){
            var checkblank = document.getElementById('password').value;
            if(checkblank == ''){
                document.getElementById('error-pass').style.display = 'block';
            }else{
                document.getElementById('error-pass').style.display = 'none';

                checkRegx2("password",checkblank, regxPass);
        }
    }

        function showPass(){
            var checkShowPass = document.getElementById('showPass');
            console.log(checkShowPass.checked);
            if(checkShowPass.checked){
                document.getElementById('password').type = "text";
            }else{
                document.getElementById('password').type = "password";
            }
        }

        function checkRegx(checkRegx,str, index){
            console.log(checkRegx.test(str));
            if(checkRegx.test(str)){
                document.querySelectorAll('p + p')[index].style.display = 'none';
            }else{
                document.querySelectorAll('p + p')[index].style.display = 'block';
            }
        }

        function checkRegx2(id, checkRegx, str){
            console.log(regxEmail.test(str));
            var text = "#"+ id + "p + p";
            if(regxEmail.test(str)){
                document.querySelector(text).style.display = 'none';
            }else{
                document.querySelector(text).style.display = 'block';
            }
        }

    </script>
</body>
</html>